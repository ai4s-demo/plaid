# Smart Campaign Designer 应用设计计划

## 设计范围
基于需求规格说明书，设计 Smart Campaign Designer 的组件架构、服务层和依赖关系。

**技术栈**：
- 前端：React
- 后端：Python (FastAPI)
- AI：Amazon Bedrock (Claude)
- 约束求解：OR-Tools（直接集成在 Python 后端）

---

## 设计计划

### 1. 组件识别与定义
- [ ] 定义前端组件（React）
- [ ] 定义后端 API 组件（FastAPI）
- [ ] 定义 AI Agent 组件（Bedrock 集成）
- [ ] 定义约束求解器模块（OR-Tools）
- [ ] 定义数据模型

### 2. 组件方法设计
- [ ] 设计前端组件接口
- [ ] 设计后端 API 端点
- [ ] 设计 Agent 交互接口
- [ ] 设计约束求解器接口

### 3. 服务层设计
- [ ] 设计 Agent 编排服务
- [ ] 设计文件处理服务
- [ ] 设计布局生成服务
- [ ] 设计输出生成服务

### 4. 组件依赖设计
- [ ] 绘制组件依赖图
- [ ] 定义通信模式
- [ ] 设计数据流

### 5. 验证设计完整性
- [ ] 检查所有需求覆盖
- [ ] 验证组件边界清晰
- [ ] 确认接口一致性

---

## 设计决策问题

### Q1: 前后端通信模式

Agent 对话需要实时响应，您希望使用哪种通信模式？

- A) REST API + 轮询（简单，但响应延迟较高）
- B) WebSocket（实时双向通信，体验更好）
- C) Server-Sent Events (SSE)（服务器推送，适合流式响应）
- X) 其他

[Answer]: C

### Q2: Agent 对话状态管理

多轮对话中，Agent 需要记住上下文。您希望如何管理对话状态？

- A) 前端管理（对话历史存储在浏览器）
- B) 后端管理（对话历史存储在服务器内存）
- C) 混合模式（前端存储历史，后端处理上下文）
- X) 其他

[Answer]: C

### Q3: 文件处理策略

上传的源板文件如何处理？

- A) 内存处理（文件不落盘，处理完即丢弃）
- B) 临时文件（保存到临时目录，定期清理）
- C) 会话存储（与对话会话关联，会话结束清理）
- X) 其他

[Answer]: A

### Q4: 布局可视化技术

板布局可视化使用什么技术？

- A) Canvas（高性能，适合大量数据）
- B) SVG（矢量图形，易于交互）
- C) HTML Table + CSS（简单直接）
- D) 第三方图表库（如 D3.js, Plotly）
- X) 其他

[Answer]: B

### Q5: PDF 报告生成

PDF 报告在哪里生成？

- A) 前端生成（使用 jsPDF 等库）
- B) 后端生成（使用 ReportLab/WeasyPrint 等 Python 库）
- C) 两者都支持（用户可选）
- X) 其他

[Answer]: A

---

请在每个 `[Answer]:` 后填写您的选择，完成后告诉我。
